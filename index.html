<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GlowGuide AI - Real AI Skin Analysis</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }
        .header {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 20px;
            backdrop-filter: blur(10px);
        }
        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ff6b6b, #ffa8a8);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .camera-box {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }
        #video-container {
            position: relative;
            display: inline-block;
            margin: 10px 0;
        }
        canvas {
            border: 3px solid white;
            border-radius: 10px;
            background: black;
        }
        .buttons {
            margin: 20px 0;
        }
        button {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 15px 30px;
            margin: 10px;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }
        button:hover {
            background: #ff5252;
            transform: scale(1.05);
        }
        button:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
        }
        .secondary-btn {
            background: #4CAF50;
        }
        .secondary-btn:hover {
            background: #45a049;
        }
        .result-box {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            text-align: left;
        }
        .product {
            background: white;
            color: #333;
            margin: 10px 0;
            padding: 15px;
            border-radius: 10px;
        }
        .skin-type {
            display: inline-block;
            padding: 8px 20px;
            background: #ff6b6b;
            border-radius: 20px;
            margin: 10px 0;
            font-weight: bold;
        }
        .confidence-display {
            background: rgba(255,255,255,0.2);
            padding: 10px;
            border-radius: 10px;
            margin: 10px 0;
        }
        .disclaimer {
            font-size: 12px;
            opacity: 0.8;
            margin-top: 30px;
        }
        .loading {
            font-size: 18px;
            margin: 20px 0;
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .feature {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
        }
        .user-count {
            background: rgba(255, 255, 255, 0.2);
            padding: 10px;
            border-radius: 10px;
            margin: 10px 0;
        }
        .prediction-display {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            min-height: 60px;
        }
    </style>
    
    <!-- p5.js and ml5.js -->
    <script src="https://cdn.jsdelivr.net/npm/p5@latest/lib/p5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/p5@latest/lib/addons/p5.dom.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ml5@latest/dist/ml5.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚ú® GlowGuide AI ‚ú®</h1>
            <p>Real AI Skin Analysis & Personalized Recommendations</p>
            <div class="user-count">
                <strong>üöÄ Powered by p5.js + ml5.js Neural Network</strong>
            </div>
        </div>

        <div class="feature-grid">
            <div class="feature">
                <h3>üß† Real AI</h3>
                <p>ml5.js neural network</p>
            </div>
            <div class="feature">
                <h3>üíé Personalized</h3>
                <p>Custom recommendations</p>
            </div>
            <div class="feature">
                <h3>üéØ Live Analysis</h3>
                <p>Real-time detection</p>
            </div>
            <div class="feature">
                <h3>üîí Private</h3>
                <p>No data stored</p>
            </div>
        </div>

        <div class="camera-box">
            <h3>üì∑ AI Skin Analysis</h3>
            <div id="video-container"></div>
            <div class="prediction-display" id="prediction-display">
                <p>AI analysis will appear here...</p>
            </div>
            <div class="buttons">
                <button onclick="startAnalysis()" id="startBtn">üé• Start AI Analysis</button>
                <button onclick="shareApp()" class="secondary-btn">üì§ Share This App</button>
            </div>
        </div>

        <div class="loading" id="loading">
            üî¨ Loading AI Model... Please allow camera access
        </div>

        <div id="result"></div>
        <div id="recommendations"></div>

        <div class="result-box">
            <h3>üí° Tips for Best AI Results</h3>
            <ul style="text-align: left; margin: 15px;">
                <li>Use good lighting facing your face</li>
                <li>Remove makeup for accurate analysis</li>
                <li>Take photo in natural light if possible</li>
                <li>Keep face centered in frame</li>
                <li>Stay still during analysis for best accuracy</li>
            </ul>
        </div>

        <p class="disclaimer">
            ‚ö†Ô∏è Disclaimer: This AI provides cosmetic recommendations only. Not medical advice. 
            Consult a dermatologist for serious concerns. We don't store your images.
        </p>
    </div>

    <script>
        // Global variables
        let classifier;
        let video;
        let flippedVideo;
        let currentLabel = "";
        let currentConfidence = 0;
        let isAnalyzing = false;

        // REPLACE THIS WITH YOUR ACTUAL MODEL URL
        let imageModelURL = 'https://teachablemachine.withgoogle.com/models/YOUR_MODEL_ID/';

        // Skin analysis database - MATCH YOUR AI MODEL CLASSES
        const skinConditions = {
            'Acne Skin': {
                description: 'AI detected signs of breakouts, redness, and inflammation.',
                symptoms: ['Pimples', 'Blackheads', 'Redness', 'Oily T-zone', 'Inflammation'],
                products: [
                    'CeraVe SA Cleanser - With Salicylic Acid to unclog pores',
                    'The Ordinary Niacinamide 10% + Zinc 1% - Reduces inflammation and oil',
                    'La Roche-Posay Effaclar Duo - Targets acne and post-acne marks',
                    'Neutrogena Oil-Free Acne Wash - Daily prevention wash',
                    'COSRX Acne Pimple Master Patch - For spot treatment'
                ],
                routine: 'üîÑ Cleanse twice daily ‚Üí üß¥ Apply Niacinamide serum ‚Üí üíß Oil-free moisturizer ‚Üí üõ°Ô∏è Non-comedogenic sunscreen',
                tips: [
                    'Avoid touching your face throughout the day',
                    'Change pillowcases weekly',
                    'Use non-comedogenic products only',
                    'Don\'t pop pimples - causes scarring'
                ]
            },
            'Dry Skin': {
                description: 'AI detected signs of flakiness, tightness, and dehydration.',
                symptoms: ['Flaky patches', 'Tight feeling', 'Rough texture', 'Redness', 'Itching'],
                products: [
                    'La Roche-Posay Lipikar Moisturizer - Intense 24h hydration',
                    'The Ordinary Hyaluronic Acid 2% + B5 - Attracts and holds moisture',
                    'CeraVe Moisturizing Cream - Repairs skin barrier with ceramides',
                    'Kiehl\'s Ultra Facial Cream - Non-greasy all-day hydration',
                    'Avene Thermal Spring Water - Instant soothing relief'
                ],
                routine: 'üîÑ Gentle cream cleanser ‚Üí üí¶ Hyaluronic acid on damp skin ‚Üí üß¥ Rich moisturizer ‚Üí üõ°Ô∏è Hydrating sunscreen',
                tips: [
                    'Apply moisturizer to damp skin for better absorption',
                    'Use lukewarm water instead of hot',
                    'Add a humidifier to your room',
                    'Avoid harsh alcohol-based products'
                ]
            },
            'Oily Skin': {
                description: 'AI detected excess sebum production and shiny appearance.',
                symptoms: ['Shiny appearance', 'Large pores', 'Greasy feel', 'Frequent breakouts'],
                products: [
                    'Neutrogena Oil-Free Cleanser - Removes excess oil',
                    'The Ordinary Salicylic Acid Masque - Deep cleans pores',
                    'La Roche-Posay Matte Moisturizer - Oil-free hydration',
                    'Biore Charcoal Cleanser - Deep cleans oily areas',
                    'Innisfree No-Sebum Mineral Powder - Controls shine'
                ],
                routine: 'üîÑ Oil-control cleanser ‚Üí üéØ Salicylic acid treatment ‚Üí üíß Oil-free moisturizer ‚Üí üõ°Ô∏è Matte sunscreen',
                tips: [
                    'Use blotting papers throughout the day',
                    'Avoid over-washing which can increase oil',
                    'Choose gel-based products over creams',
                    'Clay masks 1-2 times per week'
                ]
            },
            'Normal Skin': {
                description: 'AI detected balanced, healthy skin with few concerns.',
                symptoms: ['Even tone', 'Smooth texture', 'Few breakouts', 'Comfortable feel'],
                products: [
                    'Cetaphil Gentle Cleanser - Maintains skin balance',
                    'The Ordinary "Buffet" - Multi-target serum for prevention',
                    'Kiehl\'s Ultra Facial Cream - Lightweight all-day hydration',
                    'La Roche-Posay Toleriane Moisturizer - Maintains skin health',
                    'COSRX Snail Mucin Essence - Boosts hydration and repair'
                ],
                routine: 'üîÑ Gentle cleanse ‚Üí üíé Preventive serum ‚Üí üíß Light moisturizer ‚Üí üõ°Ô∏è Daily sunscreen',
                tips: [
                    'Maintain your current routine',
                    'Focus on prevention and protection',
                    'Don\'t over-complicate your routine',
                    'Regular sunscreen is your best defense'
                ]
            }
        };

        // p5.js setup function
        function setup() {
            // This will be called by p5.js automatically
            console.log("p5.js setup complete");
        }

        // Start AI Analysis
        function startAnalysis() {
            const startBtn = document.getElementById('startBtn');
            const loadingElement = document.getElementById('loading');
            
            startBtn.disabled = true;
            startBtn.innerHTML = 'üîÑ Starting...';
            loadingElement.style.display = 'block';

            // Initialize p5.js sketch
            initializeSketch();
        }

        // Initialize p5.js sketch
        function initializeSketch() {
            // Create p5.js instance
            new p5(function(p) {
                p.preload = function() {
                    // Load your trained AI model
                    classifier = ml5.imageClassifier(imageModelURL + 'model.json');
                    document.getElementById('loading').innerHTML = 'üî¨ Loading AI Model...';
                };

                p.setup = function() {
                    const canvas = p.createCanvas(400, 300);
                    canvas.parent('video-container');
                    
                    // Create the video
                    video = p.createCapture(p.VIDEO);
                    video.size(400, 300);
                    video.hide();

                    document.getElementById('loading').innerHTML = 'üéØ AI Model Loaded! Analyzing your skin...';
                    
                    // Start classifying
                    classifyVideo();
                    
                    // Enable button
                    document.getElementById('startBtn').innerHTML = '‚úÖ AI Analysis Active';
                };

                p.draw = function() {
                    p.background(0);
                    // Draw the flipped video
                    p.translate(p.width, 0);
                    p.scale(-1, 1);
                    p.image(video, 0, 0, p.width, p.height);
                };

                // Get a prediction for the current video frame
                function classifyVideo() {
                    if (!classifier) return;
                    
                    flippedVideo = ml5.flipImage(video);
                    classifier.classify(flippedVideo, gotResult);
                }

                // When we get a result
                function gotResult(error, results) {
                    if (error) {
                        console.error(error);
                        document.getElementById('prediction-display').innerHTML = 
                            '<p>‚ùå AI Analysis Error. Please refresh and try again.</p>';
                        return;
                    }
                    
                    // The results are in an array ordered by confidence
                    currentLabel = results[0].label;
                    currentConfidence = results[0].confidence;
                    
                    // Update prediction display
                    updatePredictionDisplay();
                    
                    // Update main results if confidence is high
                    if (currentConfidence > 0.7) {
                        displayRealResults(currentLabel, currentConfidence);
                    }
                    
                    // Continue classifying
                    classifyVideo();
                }
            });
        }

        // Update the prediction display
        function updatePredictionDisplay() {
            const confidencePercent = (currentConfidence * 100).toFixed(1);
            const display = document.getElementById('prediction-display');
            
            display.innerHTML = `
                <h4>üéØ Live AI Detection:</h4>
                <div class="confidence-display">
                    <strong>${currentLabel}</strong><br>
                    <span>Confidence: ${confidencePercent}%</span>
                </div>
            `;
        }

        // Display AI analysis results
        function displayRealResults(skinType, confidence) {
            const conditionData = skinConditions[skinType] || skinConditions['Normal Skin'];
            const confidencePercent = (confidence * 100).toFixed(1);
            
            const resultElement = document.getElementById('result');
            resultElement.innerHTML = `
                <div class="result-box">
                    <h2>üéØ AI Skin Analysis Complete!</h2>
                    <div class="skin-type">${skinType}</div>
                    <p><strong>AI Confidence:</strong> ${confidencePercent}%</p>
                    <p><strong>Description:</strong> ${conditionData.description}</p>
                    <p><strong>Detected Signs:</strong> ${conditionData.symptoms.join(', ')}</p>
                    
                    <h3 style="margin-top: 20px;">üìã Your Custom Routine</h3>
                    <p>${conditionData.routine}</p>
                    
                    <h3 style="margin-top: 20px;">üí° Expert Tips</h3>
                    <ul style="margin: 10px 0 10px 20px;">
                        ${conditionData.tips.map(tip => `<li>${tip}</li>`).join('')}
                    </ul>
                    
                    <p style="margin-top: 15px; background: rgba(100,255,100,0.2); padding: 10px; border-radius: 5px;">
                        ‚úÖ <strong>Real AI Analysis:</strong> Powered by ml5.js neural network!
                    </p>
                </div>
            `;

            showRecommendations(skinType);
        }

        // Show product recommendations
        function showRecommendations(skinType) {
            const conditionData = skinConditions[skinType] || skinConditions['Normal Skin'];
            const products = conditionData.products;
            
            let productsHTML = `
                <div class="result-box">
                    <h3>üíé Recommended Products for ${skinType}</h3>
                    <p>These products work well for your skin type:</p>
            `;
            
            products.forEach(product => {
                productsHTML += `
                    <div class="product">
                        <strong>${product.split(' - ')[0]}</strong><br>
                        <em>${product.split(' - ')[1]}</em>
                    </div>
                `;
            });
            
            productsHTML += `
                <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.2); border-radius: 10px;">
                    <strong>üõí Where to buy:</strong> Available at Amazon, Sephora, Ulta, or your local pharmacy.
                </div>
            </div>
            `;
            
            document.getElementById('recommendations').innerHTML = productsHTML;
        }

        // Share function
        function shareApp() {
            const shareUrl = 'https://allyguuu.github.io/skin-ai/';
            const shareText = 'Check out this amazing AI skin analysis app! It uses real neural networks to analyze your skin.';
            
            if (navigator.share) {
                navigator.share({
                    title: 'GlowGuide AI - Real AI Skin Analysis',
                    text: shareText,
                    url: shareUrl
                });
            } else {
                navigator.clipboard.writeText(shareUrl).then(() => {
                    alert('üìã Link copied to clipboard! Share: ' + shareUrl);
                });
            }
        }

        // Initial welcome message
        window.onload = function() {
            document.getElementById('result').innerHTML = `
                <div class="result-box">
                    <h3>üëã Welcome to GlowGuide AI!</h3>
                    <p>This app uses <strong>real AI powered by p5.js and ml5.js</strong> to analyze your skin and provide personalized recommendations.</p>
                    
                    <div style="background: rgba(255,255,255,0.2); padding: 15px; border-radius: 10px; margin: 15px 0;">
                        <h4>üéØ How It Works:</h4>
                        <ul style="text-align: left; margin: 10px;">
                            <li>Click <strong>"Start AI Analysis"</strong> to load the neural network</li>
                            <li>Allow camera access when prompted</li>
                            <li>Position your face clearly in the frame</li>
                            <li>Watch real-time AI analysis of your skin</li>
                            <li>Get personalized product recommendations</li>
                        </ul>
                    </div>
                    
                    <p><strong>Ready to discover what AI says about your skin? Click "Start AI Analysis"! üöÄ</strong></p>
                </div>
            `;
        };
    </script>
</body>
</html>
